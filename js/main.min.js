NProgress.start();var constants={},main=function(){NProgress.inc(),$.ajax({url:"https://api.myjson.com/bins/3uwf3"}).done(function(a){NProgress.set(.7);var s=a.data;constants.length=s.length,utils.appendTemplate(s),utils.showFooter(),NProgress.done(),addHandler()})},addHandler=function(){$(".showModal").click(function(){var a=$(this).attr("url"),s=$("#modal1"),i=$(this).attr("showParam"),e=$(this).attr("name");s.empty(),"true"===i?(s.append(utils.frameTemplate(a)),s.openModal()):(s.append(utils.preloaderTemp),s.openModal(),e=e.split(" ").join("+"),$.ajax({url:"http://www.omdbapi.com/?t="+e}).done(function(a){s.empty(),s.append(utils.imdbTemplate(JSON.parse(a))),$("#modal1 .tmplCls").show(),$(".tmplCls img").hide(),$(".tmplCls img").load(function(){$("#modal1 .preloader-wrapper").hide(),$(this).show()})}))}),$(".fel-luck").click(function(){$(".focused").removeClass("focused");var a=Math.floor(Math.random()*constants.length)+1,s=$($("#main li")[a]);$("#main li")[a].scrollIntoView(),s.addClass("focused")})},utils={appendTemplate:function(a){var s=this,i=$("#main ul");for(var e in a){var l=s.cardTemplate(a[e]);i.append(l)}},cardTemplate:function(a){var s='<li ><div class="card"><a href="#">'+a.name+'</a><a href="#" showParam=false url="'+a.imdbLink+'"+ title="imdb rating: '+a.imdbRating+' " name="'+a.name+'"  class="showModal"><img src="img/imdb.jpg"></a><a href="#" showParam=true url="'+a.rtLink+'" class="showModal" title="rotten tomatoes rating : '+a.rtRating+' "><img src="img/rt.jpg"></a></div></li>';return s},showFooter:function(){$("footer").show()},frameTemplate:function(a){return'<iframe height="100%" width="100%" src="'+a+'"></iframe>'},preloaderTemp:function(){var a='<div class="preloader-wrapper big active"><div class="spinner-layer spinner-blue"><div class="circle-clipper left"><div class="circle"></div></div></div<div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div>';return a},imdbTemplate:function(a){var s='<div class="col s12 m8 tmplCls offset-m2 l6 offset-l3" style="display:none"><div class="card-panel grey lighten-5 z-depth-1"><div class="row"><div class="col s5 ">'+this.preloaderTemp()+'<img src="'+a.Poster+'" alt="" class=" responsive-img"></div><div class="col s6"><div class="row"><h3>'+a.Title+'</h3></div><div class="row">Genre: <span class="val">'+a.Genre+'</span></h3></div><div class="row">Rating: <span class="val">'+a.imdbRating+'</span></div><div class="row">imdb Votes: '+a.imdbVotes+"</div><br><p><b>Plot: </b> "+a.Plot+"</p>";return s}};$(document).ready(main);